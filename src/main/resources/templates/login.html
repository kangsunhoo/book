<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <link rel="stylesheet" type="text/css" href="/css/style.css">
</head>
<body>
<div th:replace="hnf/header :: header"></div>
<div th:replace="hnf/aside :: aside"></div>

<div class="login">
  <h2>로그인</h2>
  <form action="/login_proc" method="post" onsubmit="return handleSubmit();">
    <input type="text" name="userid" placeholder="아이디" required>
    <input type="password" name="pwd" placeholder="비밀번호" required>
    <button type="submit">로그인</button>
  </form>
</div>

<div th:if="${error}" style="color: red;">[[${error}]]</div> <!-- 에러 메시지 표시 -->

<script>
  function handleSubmit() {
      console.log("hello");

      // 사용자 입력값 가져오기
      const userid = document.querySelector('input[name="userid"]').value;
      const password = document.querySelector('input[name="pwd"]').value;


      if (!isLoginSuccessful) {
          const errorMessage = "로그인 실패: 아이디 또는 비밀번호가 잘못되었습니다.";
          alert(errorMessage);
          return false; // 폼 제출 중지
      }
      // 로그인 성공 시 홈으로 리다이렉트
      window.opener.location.href = "/home"; // 부모 창 리다이렉트
      window.close(); // 팝업 창 닫기
      return false; // 폼 제출 중지
  }
</script>

<div th:replace="hnf/footer :: footer"></div>
</body>
</html>